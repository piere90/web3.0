// Copyright (C) 1998-2022 by Northwoods Software Corporation. All Rights Reserved.
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("gojs"),require("react")):"function"==typeof define&&define.amd?define(["exports","gojs","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).goJsReact={},e.go,e.React)}(this,(function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var n=a(t),o=a(r),i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)};function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var l=function(e){function t(t){var r=e.call(this,t)||this;return r.wasCleared=!1,r.modelChangedListener=null,r.divRef=o.createRef(),r}return s(t,e),t.prototype.getDiagram=function(){return null===this.divRef.current?null:n.Diagram.fromDiv(this.divRef.current)},t.prototype.clear=function(){var e=this.getDiagram();null!==e&&(e.clear(),this.wasCleared=!0)},t.prototype.componentDidMount=function(){var e=this;if(null!==this.divRef.current){var t=this.props.initDiagram();t.div=this.divRef.current,this.modelChangedListener=function(t){if(t.isTransactionFinished&&t.model&&!t.model.isReadOnly&&e.props.onModelChange){var r=t.model.toIncrementalData(t);null!==r&&e.props.onModelChange(r)}},t.addModelChangedListener(this.modelChangedListener),t.delayInitialization((function(){e.mergeData(t,!0)}))}},t.prototype.componentWillUnmount=function(){var e=this.getDiagram();null!==e&&(e.div=null,null!==this.modelChangedListener&&(e.removeModelChangedListener(this.modelChangedListener),this.modelChangedListener=null))},t.prototype.shouldComponentUpdate=function(e,t){return e.divClassName!==this.props.divClassName||e.style!==this.props.style||!e.skipsDiagramUpdate&&(e.nodeDataArray!==this.props.nodeDataArray||e.linkDataArray!==this.props.linkDataArray||e.modelData!==this.props.modelData)},t.prototype.componentDidUpdate=function(e,t){var r=this;if(e.nodeDataArray!==this.props.nodeDataArray||e.linkDataArray!==this.props.linkDataArray||e.modelData!==this.props.modelData){var a=this.getDiagram();null!==a&&(this.wasCleared?a.delayInitialization((function(){r.mergeData(a,!0),r.wasCleared=!1})):this.mergeData(a,!1))}},t.prototype.mergeData=function(e,t){var r=this;e.model.commit((function(e){void 0!==r.props.modelData&&e.assignAllDataProperties(e.modelData,r.props.modelData),e.mergeNodeDataArray(r.props.nodeDataArray),void 0!==r.props.linkDataArray&&e instanceof n.GraphLinksModel&&e.mergeLinkDataArray(r.props.linkDataArray)}),t?"initial merge":"merge data")},t.prototype.render=function(){return o.createElement("div",{ref:this.divRef,className:this.props.divClassName,style:this.props.style})},t}(o.Component),p=function(e){function t(t){var r=e.call(this,t)||this;return r.divRef=o.createRef(),r}return s(t,e),t.prototype.getOverview=function(){return null===this.divRef.current?null:n.Diagram.fromDiv(this.divRef.current)},t.prototype.componentDidMount=function(){var e;null!==this.divRef.current&&(void 0!==this.props.initOverview?e=this.props.initOverview():(e=new n.Overview).contentAlignment=n.Spot.Center,e.div=this.divRef.current,e.observed=this.props.observedDiagram)},t.prototype.componentWillUnmount=function(){var e=this.getOverview();null!==e&&(e.div=null,e.observed=null)},t.prototype.shouldComponentUpdate=function(e,t){return e.divClassName!==this.props.divClassName||e.style!==this.props.style||e.observedDiagram!==this.props.observedDiagram},t.prototype.componentDidUpdate=function(e,t){if(e.observedDiagram!==this.props.observedDiagram){var r=this.getOverview();null!==r&&(r.observed=this.props.observedDiagram)}},t.prototype.render=function(){return o.createElement("div",{ref:this.divRef,className:this.props.divClassName,style:this.props.style})},t}(o.Component),d=function(e){function t(t){var r=e.call(this,t)||this;return r.wasCleared=!1,r.divRef=o.createRef(),r}return s(t,e),t.prototype.getPalette=function(){return null===this.divRef.current?null:n.Diagram.fromDiv(this.divRef.current)},t.prototype.clear=function(){var e=this.getPalette();null!==e&&(e.clear(),this.wasCleared=!0)},t.prototype.componentDidMount=function(){var e=this;if(null!==this.divRef.current){var t=this.props.initPalette();t.div=this.divRef.current,t.delayInitialization((function(){e.mergeData(t,!0)}))}},t.prototype.componentWillUnmount=function(){var e=this.getPalette();null!==e&&(e.div=null)},t.prototype.shouldComponentUpdate=function(e,t){return e.divClassName!==this.props.divClassName||e.style!==this.props.style||(e.nodeDataArray!==this.props.nodeDataArray||e.linkDataArray!==this.props.linkDataArray||e.modelData!==this.props.modelData)},t.prototype.componentDidUpdate=function(e,t){var r=this;if(e.nodeDataArray!==this.props.nodeDataArray||e.linkDataArray!==this.props.linkDataArray||e.modelData!==this.props.modelData){var a=this.getPalette();null!==a&&(this.wasCleared?a.delayInitialization((function(){r.mergeData(a,!0),r.wasCleared=!1})):this.mergeData(a,!1))}},t.prototype.mergeData=function(e,t){var r=this;e.model.commit((function(e){void 0!==r.props.modelData&&e.assignAllDataProperties(e.modelData,r.props.modelData),e.mergeNodeDataArray(r.props.nodeDataArray),void 0!==r.props.linkDataArray&&e instanceof n.GraphLinksModel&&e.mergeLinkDataArray(r.props.linkDataArray)}),t?"initial merge":"merge data")},t.prototype.render=function(){return o.createElement("div",{ref:this.divRef,className:this.props.divClassName,style:this.props.style})},t}(o.Component);e.ReactDiagram=l,e.ReactOverview=p,e.ReactPalette=d,Object.defineProperty(e,"__esModule",{value:!0})}));
